redChat.controller("chatController",["$scope","socket","chatService","smoothScroll","$location",function(o,e,r,s,n){o.userObj={},o.onlineUsers=[],o.messages=[],o.chatService=r,o.room=n.path().replace("/",""),localStorage.user&&angular.fromJson(localStorage.user).room==o.room&&(e.emit("set-user",angular.fromJson(localStorage.user)),o.userObj=angular.fromJson(localStorage.user)),e.emit("join-room",o.room),e.on("messages-history",function(e){e.forEach(function(o){a(o)}),o.messages=e}),e.on("message",function(e){a(e),o.messages.push(e)}),e.on("online-users",function(e){o.onlineUsers=e}),e.on("set-user",function(e){o.userObj=e,localStorage.user=angular.toJson(e)}),o.sendMessage=function(r){e.emit("message",{text:r}),o.messageInput=""};var a=function(e){e.sender.id==o.userObj.id&&(e.sender.username="You")}}]),redChat.controller("homeController",["$scope","$location",function(o,e){o.createRoom=function(){var o=Math.floor(1e4*Math.random());e.path(o)}}]);